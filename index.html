<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>üéÑüéâ Holiday Crazy Offer - Full Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* Global reset */
    *, *::before, *::after {
      box-sizing: border-box;
    }
    body, html {
      margin: 0; padding: 0;
      height: 100%;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background:
        radial-gradient(circle at center, #050505 0%, #0c0c0c 100%);
      color: #fff;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* Page background with festive theme (snow + bokeh lights) */
    body::before {
      content: "";
      pointer-events: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background-image:
        radial-gradient(circle, rgba(255,255,255,0.3) 2px, transparent 3px),
        radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 2px),
        radial-gradient(circle, rgba(255,255,255,0.05) 1px, transparent 1px);
      background-size: 50px 50px, 30px 30px, 100px 100px;
      background-position: 0 0, 15px 15px, 50px 50px;
      z-index: 0;
      animation: snowmove 20s linear infinite;
      filter: drop-shadow(0 0 5px #ff4f4f);
    }

    @keyframes snowmove {
      0% {background-position: 0 0, 15px 15px, 50px 50px;}
      100% {background-position: 0 50px, 15px 65px, 50px 150px;}
    }

    header {
      background: linear-gradient(45deg, #d72631, #f46036);
      padding: 25px 15px;
      text-align: center;
      box-shadow:
        0 0 15px 5px #ff4f4f;
      position: sticky;
      top: 0;
      z-index: 10;
      user-select: none;
    }
    header h1 {
      margin: 0;
      font-size: 2.2rem;
      color: #fff;
      letter-spacing: 4px;
      text-shadow:
        0 0 7px #ffcbcb,
        0 0 20px #ff7a7a;
    }
    header p {
      margin-top: 8px;
      font-size: 1rem;
      color: #ffe1e1;
      letter-spacing: 2px;
      text-transform: uppercase;
      font-weight: 600;
      text-shadow: 0 0 5px #ff8f8f;
    }

    main {
      flex-grow: 1;
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      align-items: center;
      padding: 40px 20px;
      gap: 30px;
      background: radial-gradient(circle at bottom right, #280000, #010101);
      position: relative;
      z-index: 1;
      min-height: 600px;
    }

    /* Left side: Big festive image or illustration */
    .promo-image {
      flex: 1;
      max-width: 500px;
      min-width: 280px;
      background: url('https://images.unsplash.com/photo-1601924928867-f487a6c5775b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w5dXx8MHx8fHx8fHx8MTY4OTAzNjE5NQ&ixlib=rb-4.0.3&q=80&w=800') no-repeat center/cover;
      border-radius: 25px;
      box-shadow:
        0 0 30px 4px #ff3f3f,
        0 0 50px 15px #ff3f3f66;
      filter: drop-shadow(0 0 10px #ff0000);
      min-height: 320px;
      /* Ensure visible on mobile */
      width: 100%;
    }
    @media (max-width: 900px) {
      main {
        flex-direction: column-reverse;
        min-height: auto;
      }
      .promo-image {
        width: 90vw;
        height: 200px;
        margin-top: 30px;
        max-width: none;
        min-height: 200px;
      }
    }

    /* Right side: Prize section */
    .prize-section {
      flex: 1;
      background: linear-gradient(135deg, #ff495c, #a40000);
      border-radius: 25px;
      padding: 30px 30px 40px;
      box-shadow:
        0 0 10px #ff0000,
        0 0 20px #ff4a4a,
        inset 0 0 10px #fff3;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      overflow: visible; /* Fix popup cutoff */
      user-select: none;
      max-width: 450px;
      min-height: 400px;
    }

    /* Animated flickering lights border */
    .prize-section::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 25px;
      padding: 3px;
      background:
        linear-gradient(270deg, #ff0000, #ff6600, #ff0000, #ff6600);
      background-size: 600% 600%;
      animation: glowing 6s linear infinite;
      -webkit-mask:
        linear-gradient(#fff 0 0) content-box, 
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: destination-out;
      mask-composite: subtract;
      pointer-events: none;
      z-index: 0;
    }

    @keyframes glowing {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .prize-section h2 {
      font-size: 2rem;
      margin-bottom: 6px;
      color: #fff5;
      letter-spacing: 3px;
      text-shadow:
        0 0 5px #ffbaba,
        0 0 20px #ff4c4c;
      user-select: none;
    }

    .prize-section h3 {
      font-size: 1.7rem;
      margin-bottom: 25px;
      text-transform: uppercase;
      font-weight: 700;
      color: #ffd6d6;
      letter-spacing: 2.5px;
      text-shadow:
        0 0 6px #ff7575,
        0 0 15px #ff2a2a;
      user-select: none;
    }

    .chances-left {
      font-size: 1.4rem;
      margin-bottom: 18px;
      font-weight: 700;
      color: #fff;
      text-shadow:
        0 0 8px #fff7,
        0 0 20px #ff6b6b;
      user-select: none;
    }
    .chances-left strong {
      font-size: 2rem;
      color: #fff7b3;
      text-shadow:
        0 0 20px #ffd700,
        0 0 25px #ffb700;
    }

    .btn-group {
      display: flex;
      gap: 15px;
      margin-bottom: 24px;
      flex-wrap: wrap;
      justify-content: center;
      user-select: none;
    }
    button {
      background: linear-gradient(45deg, #ff2a2a, #b10000);
      color: #fff;
      border: none;
      cursor: pointer;
      padding: 14px 36px;
      font-size: 1.15rem;
      font-weight: 700;
      border-radius: 50px;
      box-shadow:
        0 4px 15px rgb(255 0 0 / 0.85),
        inset 0 -3px 8px rgb(255 255 255 / 0.15);
      text-shadow: 0 0 8px #7a0000;
      user-select: none;
      transition: all 0.25s ease;
      flex-grow: 1;
      min-width: 150px;
      max-width: 220px;
      position: relative;
      overflow: hidden;
      z-index: 1;
      touch-action: manipulation;
    }
    button:disabled {
      background: #660000;
      box-shadow: none;
      cursor: not-allowed;
      color: #bbb;
      text-shadow: none;
    }
    button:hover:not(:disabled),
    button:focus-visible:not(:disabled) {
      background: linear-gradient(45deg, #ff6363, #d00000);
      box-shadow:
        0 6px 25px rgb(255 80 80 / 0.95),
        inset 0 -3px 10px rgb(255 255 255 / 0.4);
      transform: scale(1.07);
      outline: none;
    }
    button:focus-visible {
      outline: 3px solid #ffc107;
      outline-offset: 3px;
    }

    #message {
      font-size: 1.3rem;
      font-weight: 700;
      min-height: 62px;
      text-align: center;
      line-height: 1.3;
      color: #ffea71;
      text-shadow:
        0 0 7px #ffcf24,
        0 0 20px #ff9e00;
      user-select: none;
      margin-bottom: 0;
      padding: 0 10px;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    /* Footer */
    footer {
      text-align: center;
      color: #ff8c8c;
      font-size: 0.9rem;
      padding: 15px 5px 25px;
      user-select: none;
      text-shadow: 0 0 4px #5a1a1a;
      background: transparent;
    }

    /* Responsive */
    @media (max-width: 1000px) {
      main {
        flex-direction: column-reverse;
        gap: 40px;
        min-height: auto;
        padding: 30px 15px 50px;
      }
      .prize-section {
        max-width: 100%;
        width: 100%;
        min-height: auto;
      }
      .promo-image {
        max-width: 90vw;
        height: 200px;
        border-radius: 18px;
        box-shadow:
          0 0 30px 6px #ff4a4a,
          0 0 50px 20px #ff4a4a66;
        min-height: 200px;
      }
      button {
        max-width: 100%;
      }
      .btn-group {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Holiday Mega Offer</h1>
    <p>Christmas & New Year Special üéÖ‚ú®</p>
  </header>

  <main>
    <div class="promo-image" aria-hidden="true" title="Festive Celebrations"></div>

    <section class="prize-section" aria-label="Prize Play Section">
      <h2>üéÅ Win Exciting Prizes!</h2>
      <h3>Get 3 Chances Per Share</h3>
      <p class="chances-left" aria-live="polite">
        Chances left: <strong id="chancesLeft">0</strong>
      </p>
      <div class="btn-group">
        <button id="playBtn" disabled aria-disabled="true" aria-describedby="message" type="button">Play</button>
        <button id="shareBtn" type="button" aria-describedby="message">Share Website</button>
      </div>
      <p id="message" role="status" aria-live="polite" aria-atomic="true"></p>
    </section>
  </main>

  <footer>
    &copy; 2024 Holiday Offers ‚Äî Spread the Joy!
  </footer>

<script>
  (function() {
    const MAX_CHANCES = 3;
    const STORAGE_KEY = "holiday_chances_left";
    const WIN_MESSAGES = [
      "üéâ You won a free gift!",
      "üéÅ Congrats! You've got a discount!",
      "‚≠ê Lucky you! Bonus points added!",
      "üí• So close! Try again!",
      "üôÅ No luck this time.",
    ];

    let chancesLeft = 0;
    let hasShared = false;

    const chancesLeftEl = document.getElementById("chancesLeft");
    const playBtn = document.getElementById("playBtn");
    const shareBtn = document.getElementById("shareBtn");
    const messageEl = document.getElementById("message");

    // On load, populate chances from localStorage if valid
    try {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (stored !== null) {
        const val = Number(stored);
        if (!isNaN(val) && val >= 0 && val <= MAX_CHANCES) {
          chancesLeft = val;
          if (chancesLeft > 0) hasShared = true;
        }
      }
    } catch(e) {
      chancesLeft = 0;
      hasShared = false;
    }
    updateUI();

    shareBtn.addEventListener("click", async () => {
      if (navigator.share) {
        // For mobiles and supported browser environments
        try {
          await navigator.share({
            title: "Holiday Mega Offer üéÑüéâ",
            text: "Join me and get 3 chances to win exciting prizes! Share & Play üéÅüéÖ",
            url: window.location.href
          });
          if (!hasShared) {
            hasShared = true;
            chancesLeft = MAX_CHANCES;
            localStorage.setItem(STORAGE_KEY, chancesLeft);
            setMessage("Thanks for sharing! You now have 3 chances.");
            updateUI();
          } else {
            alert("You already shared and have 3 chances available.");
          }
        } catch (err) {
          // User cancelled or error, do nothing special
          setMessage("Share cancelled or failed. Try sharing to get chances.");
        }
      } else {
        // Fallback for desktop or unsupported mobile browsers:
        showCustomSharePopup();
      }
    });

    playBtn.addEventListener("click", () => {
      if (chancesLeft <= 0) {
        setMessage("No chances left. Share to get 3 new chances.");
        disablePlay();
        return;
      }
      const msg = WIN_MESSAGES[Math.floor(Math.random() * WIN_MESSAGES.length)];
      setMessage(msg);
      chancesLeft--;
      localStorage.setItem(STORAGE_KEY, chancesLeft);
      updateUI();
      if (chancesLeft === 0) disablePlay();
    });

    function updateUI() {
      chancesLeftEl.textContent = chancesLeft;
      if(chancesLeft > 0) {
        playBtn.disabled = false;
        playBtn.setAttribute("aria-disabled", "false");
      } else {
        disablePlay();
      }
    }

    function disablePlay() {
      playBtn.disabled = true;
      playBtn.setAttribute("aria-disabled", "true");
    }

    function setMessage(text) {
      messageEl.textContent = text;
    }

    // Custom share popup for fallback (desktop or browsers without navigator.share)
    function showCustomSharePopup() {
      if (document.getElementById("customShareOverlay")) return;

      const overlay = document.createElement("div");
      overlay.id = "customShareOverlay";
      Object.assign(overlay.style, {
        position: "fixed",
        top: "0",
        left: "0",
        width: "100vw",
        height: "100vh",
        backgroundColor: "rgba(0,0,0,0.85)",
        zIndex: "9999",
        display: "flex",
        flexDirection: "column",
        justifyContent: "center",
        alignItems: "center",
        padding: "20px",
        backdropFilter: "blur(6px)"
      });

      const box = document.createElement("div");
      Object.assign(box.style, {
        background: "#440000",
        borderRadius: "20px",
        padding: "25px 30px",
        maxWidth: "320px",
        width: "90vw",
        color: "#ffdadb",
        textAlign: "center",
        boxShadow: "0 0 15px 3px #ff4f4f"
      });

      const title = document.createElement("h2");
      title.textContent = "Share this Offer!";
      Object.assign(title.style, {
        marginBottom: "20px",
        color: "#ff8181",
        textShadow: "0 0 15px #ff3f3f"
      });
      box.appendChild(title);

      const linkToShare = window.location.href;
      const shareText = encodeURIComponent("Join the Holiday Mega Offer! Get 3 chances to win prizes: ");
      const encodedUrl = encodeURIComponent(linkToShare);

      const btnContainer = document.createElement("div");
      Object.assign(btnContainer.style, {
        display: "flex",
        flexDirection: "column",
        gap: "15px"
      });

      function createShareLink(href, text, bg, bgDark) {
        const a = document.createElement("a");
        a.href = href;
        a.target = "_blank";
        a.rel = "noopener noreferrer";
        a.textContent = text;
        Object.assign(a.style, {
          background: `linear-gradient(45deg, ${bg}, ${bgDark})`,
          color: "#fff",
          textDecoration: "none",
          padding: "12px 15px",
          borderRadius: "40px",
          fontWeight: "700",
          fontSize: "1rem",
          userSelect: "none",
          display: "block",
          boxShadow: `0 3px 12px ${bg}99`,
          transition: "all 0.25s ease"
        });
        a.addEventListener("mouseenter", () => {
          a.style.filter = "brightness(1.1)";
          a.style.transform = "scale(1.05)";
        });
        a.addEventListener("mouseleave", () => {
          a.style.filter = "brightness(1)";
          a.style.transform = "none";
        });
        return a;
      }

      // WhatsApp (Mobile URL works fine in browser and WhatsApp app)
      btnContainer.appendChild(createShareLink(
        `https://wa.me/?text=${shareText}${encodedUrl}`,
        "Share on WhatsApp",
        "#25D366",
        "#128C7E"
      ));

      // Telegram
      btnContainer.appendChild(createShareLink(
        `https://telegram.me/share/url?url=${encodedUrl}&text=${shareText}`,
        "Share on Telegram",
        "#54A9EB",
        "#107AC9"
      ));

      // Facebook
      btnContainer.appendChild(createShareLink(
        `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`,
        "Share on Facebook",
        "#4267B2",
        "#29487D"
      ));

      // Copy Link button
      const copyBtn = document.createElement("button");
      copyBtn.textContent = "Copy Link";
      Object.assign(copyBtn.style, {
        background: "#ff4f4f",
        border: "none",
        color: "#fff",
        padding: "12px",
        fontWeight: "700",
        borderRadius: "50px",
        cursor: "pointer",
        fontSize: "1.05rem",
        boxShadow: "0 2px 12px #ff4f4fbb inset",
        userSelect: "none"
      });
      copyBtn.addEventListener("click", () => {
        navigator.clipboard.writeText(linkToShare).then(() => {
          copyBtn.textContent = "Copied!";
          setTimeout(() => (copyBtn.textContent = "Copy Link"), 1800);
          if (!hasShared) {
            hasShared = true;
            chancesLeft = MAX_CHANCES;
            localStorage.setItem(STORAGE_KEY, chancesLeft);
            setMessage("Thanks for sharing! You now have 3 chances.");
            updateUI();
          }
        }).catch(() => {
          alert("Failed to copy link. Please copy manually: " + linkToShare);
        });
      });
      btnContainer.appendChild(copyBtn);

      const closeBtn = document.createElement("button");
      closeBtn.textContent = "Close";
      Object.assign(closeBtn.style, {
        marginTop: "30px",
        background: "#660000",
        border: "none",
        color: "#ff9a9a",
        padding: "10px 30px",
        fontWeight: "700",
        borderRadius: "50px",
        cursor: "pointer",
        fontSize: "1.05rem",
        userSelect: "none",
        boxShadow: "0 0 12px #ff4f4fbb"
      });
      closeBtn.addEventListener("click", () => {
        document.body.removeChild(overlay);
        document.body.style.overflow = "";
        setMessage(""); 
      });

      box.appendChild(btnContainer);
      box.appendChild(closeBtn);
      overlay.appendChild(box);
      document.body.appendChild(overlay);

      // Prevent scrolling behind popup
      document.body.style.overflow = "hidden";
    }
  })();
</script>
</body>
</html>
